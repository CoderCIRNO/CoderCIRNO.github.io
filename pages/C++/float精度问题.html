
<html lang="zh-cn">
    <head>
        <meta content="text/html; charset=utf-8" http-equiv="content-type" />
        <title>float精度问题</title>
        <link href="../../css/default.css" rel="stylesheet">
    </head>
    <body>
        <h1 id="float">float精度问题</h1>
<p>阅读此代码</p>
<pre class="codehilite"><code class="language-cpp">#include&lt;iostream&gt;
using namespace std;

int main(void){
    if(0.1 + 0.2 == 0.3){
        cout&lt;&lt;&quot;eq&quot;&lt;&lt;endl;
    }else{
        cout&lt;&lt;&quot;!eq&quot;&lt;&lt;endl;
    }
}
</code></pre>

<p>如果只运用数学常识进行判断，可以推测代码会输出的是eq；然而实际上由于浮点数精度问题（与浮点数的存储方式有关），实际上会输出的是!eq。</p>
<p>如果坚持要进行这种判断，只能进行一个近似操作：</p>
<pre class="codehilite"><code class="language-cpp">#include&lt;iostream&gt;
#include&lt;cmath&gt;
using namespace std;

int main(void){
    if(abs((0.1 + 0.2) - 0.3) &lt; 0.0001){
        cout&lt;&lt;&quot;eq&quot;&lt;&lt;endl;
    }else{
        cout&lt;&lt;&quot;!eq&quot;&lt;&lt;endl;
    }
}
</code></pre>

<p>其中的0.0001可根据需要的精度调整。</p>
    </body>
</html>
